<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Campus Life Planner</title>
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/responsive.css" />
    <link rel="stylesheet" href="styles/animations.css" />
  </head>
  <body>
    <!-- Skip to content -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header role="banner">
      <button
        id="burger"
        aria-label="Toggle navigation"
        aria-expanded="false"
        aria-controls="main-nav"
      >
        &#9776;
      </button>
      <h1 id="app-title">Campus Life Planner</h1>
      <div id="header-controls">
        <div id="sort-group" role="group" aria-label="Sort tasks">
          <button
            id="sort-trigger"
            aria-haspopup="true"
            aria-expanded="false"
            aria-controls="sort-panel"
          >
            Sort &#9660;
          </button>
          <div
            id="sort-panel"
            role="menu"
            class="hidden"
            aria-label="Sort options"
          >
            <div id="sort-options" role="group" aria-label="Sort by">
              <button
                class="sort-option active"
                role="menuitemradio"
                aria-checked="true"
                data-value="date_created"
              >
                Date created
              </button>
              <button
                class="sort-option"
                role="menuitemradio"
                aria-checked="false"
                data-value="date_modified"
              >
                Date modified
              </button>
              <button
                class="sort-option"
                role="menuitemradio"
                aria-checked="false"
                data-value="a_to_z"
              >
                A‚ÄìZ
              </button>
              <button
                class="sort-option"
                role="menuitemradio"
                aria-checked="false"
                data-value="due_date"
              >
                Due date
              </button>
              <button
                class="sort-option"
                role="menuitemradio"
                aria-checked="false"
                data-value="priority"
              >
                Priority
              </button>
            </div>
            <div id="sort-order" role="group" aria-label="Sort order">
              <button
                class="order-btn active"
                role="menuitemradio"
                aria-checked="true"
                data-order="asc"
              >
                &#9650; Asc
              </button>
              <button
                class="order-btn"
                role="menuitemradio"
                aria-checked="false"
                data-order="desc"
              >
                &#9660; Desc
              </button>
            </div>
          </div>
        </div>
        <!-- Search input -->
        <label for="search-input" class="sr-only">Search tasks</label>
        <input
          id="search-input"
          type="search"
          placeholder="Search tasks‚Ä¶"
          aria-label="Search tasks"
          autocomplete="off"
        />

        <!-- Settings -->
        <button id="settings-btn" aria-label="Open settings">&#9881;</button>
      </div>
    </header>

    <!-- Navigation -->
    <nav id="main-nav" aria-label="App sections">
      <button class="nav-btn active" data-section="tasks" aria-current="page">
        Tasks
      </button>
      <button class="nav-btn" data-section="dashboard">Dashboard</button>
    </nav>

    <main id="main-content" tabindex="-1">
      <!-- Tasks section -->
      <section id="section-tasks" aria-label="Task list">
        <div
          id="card-wrapp"
          role="list"
          aria-label="Tasks"
          aria-live="polite"
          aria-atomic="false"
        ></div>
      </section>

      <!-- ‚îÄ‚îÄ Dashboard section ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
      <section id="section-dashboard" class="hidden" aria-label="Dashboard">
        <h2>Dashboard Overview</h2>

        <!-- stats grid -->
        <div id="stats-grid">
          <div
            class="stat-card stat-total"
            role="region"
            aria-label="Total tasks"
          >
            <div class="stat-content">
              <span class="stat-value" id="stat-total">0</span>
              <span class="stat-label">Total Tasks</span>
            </div>
          </div>
          <div
            class="stat-card stat-high"
            role="region"
            aria-label="High priority tasks"
          >
            <div class="stat-content">
              <span class="stat-value" id="stat-high">0</span>
              <span class="stat-label">High Priority</span>
            </div>
          </div>
          <div
            class="stat-card stat-week"
            role="region"
            aria-label="Due this week"
          >
            <div class="stat-content">
              <span class="stat-value" id="stat-week">0</span>
              <span class="stat-label">Due This Week</span>
            </div>
          </div>
          <div
            class="stat-card stat-done"
            role="region"
            aria-label="Completed tasks"
          >
            <div class="stat-content">
              <span class="stat-value" id="stat-done">0</span>
              <span class="stat-label">Completed</span>
            </div>
          </div>
        </div>

        <!-- Category breakdown -->
        <h3>Tasks by Category</h3>
        <div id="category-breakdown"></div>

        <!-- Priority distribution -->
        <h3>Priority Distribution</h3>
        <div id="priority-chart"></div>

        <!-- Activity chart -->
        <h3>Tasks added ‚Äî last 7 days</h3>
        <div
          id="trend-chart"
          aria-label="Tasks added in last 7 days bar chart"
          role="img"
        ></div>
        <!-- Task cap -->
        <h3>Task Capacity</h3>
        <div id="cap-row">
          <label for="cap-input">Maximum open tasks:</label>
          <input
            type="number"
            id="cap-input"
            min="1"
            max="100"
            value="10"
            aria-describedby="cap-status"
          />
        </div>
        <div
          id="cap-status"
          role="status"
          aria-live="polite"
          aria-atomic="true"
        ></div>

        <!-- Progress meter -->
        <div id="progress-meter">
          <div class="progress-label">Overall Progress</div>
          <div class="progress-bar-container">
            <div id="progress-bar" class="progress-bar"></div>
          </div>
          <div class="progress-text" id="progress-text">0% Complete</div>
        </div>
      </section>
    </main>

    <footer role="contentinfo">
      <div class="footer-links">
        <a
          href="https://github.com/ijazz-mal"
          target="_blank"
          rel="noopener"
          aria-label="GitHub profile"
          title="GitHub"
        >
          <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
            <path
              d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
            />
          </svg>
        </a>
        <a
          href="mailto:student@alueducation.com"
          aria-label="Email"
          title="Email"
        >
          <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
            <path
              d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z"
            />
          </svg>
        </a>
      </div>
    </footer>

    <!-- Floating Add Button -->
    <button id="add-btn" aria-label="Add new task">+</button>

    <!-- ARIA live region for status messages -->
    <div
      id="live-status"
      role="status"
      aria-live="polite"
      aria-atomic="true"
      class="sr-only"
    ></div>
    <div
      id="live-assertive"
      role="alert"
      aria-live="assertive"
      aria-atomic="true"
      class="sr-only"
    ></div>

    <!-- add task popup -->
    <div
      id="task-modal"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-title"
    >
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-title">Add Task</h2>
          <button id="modal-close" aria-label="Close modal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="field-group">
            <label for="form-title"
              >Title <span class="required" aria-hidden="true">*</span></label
            >
            <input
              type="text"
              id="form-title"
              placeholder="e.g. Study for finals"
              autocomplete="off"
              aria-required="true"
              aria-describedby="err-title"
            />
            <span id="err-title" class="field-error hidden" role="alert"></span>
          </div>

          <div class="field-group">
            <label for="form-description">Description</label>
            <textarea
              id="form-description"
              rows="3"
              placeholder="Optional details‚Ä¶"
              aria-describedby="err-desc"
            ></textarea>
            <span id="err-desc" class="field-error hidden" role="alert"></span>
          </div>

          <div class="field-group">
            <label for="form-tag">Category</label>
            <select id="form-tag" aria-describedby="err-tag">
              <option value="">None</option>
              <option value="academic">Academic</option>
              <option value="personal">Personal</option>
              <option value="professional">Professional</option>
              <option value="financial">Financial</option>
              <option value="entertainment">Entertainment</option>
            </select>
            <span id="err-tag" class="field-error hidden" role="alert"></span>
          </div>

          <div class="field-group">
            <label for="form-priority">Priority</label>
            <select id="form-priority" aria-describedby="err-priority">
              <option value="low">Low</option>
              <option value="medium" selected>Medium</option>
              <option value="high">High</option>
            </select>
            <span
              id="err-priority"
              class="field-error hidden"
              role="alert"
            ></span>
          </div>

          <div class="field-group">
            <label for="form-due-date">Due Date &amp; Time</label>
            <input
              type="datetime-local"
              id="form-due-date"
              aria-describedby="err-due"
            />
            <span id="err-due" class="field-error hidden" role="alert"></span>
          </div>

          <fieldset class="duration-fieldset">
            <legend>Duration</legend>
            <div class="duration-row">
              <div class="duration-field">
                <label for="form-duration-hours">Hours</label>
                <input
                  type="number"
                  id="form-duration-hours"
                  min="0"
                  max="99"
                  placeholder="0"
                  aria-describedby="err-dur"
                />
              </div>
              <div class="duration-field">
                <label for="form-duration-minutes">Minutes</label>
                <input
                  type="number"
                  id="form-duration-minutes"
                  min="0"
                  max="59"
                  placeholder="0"
                />
              </div>
            </div>
            <span id="err-dur" class="field-error hidden" role="alert"></span>
          </fieldset>

          <div id="form-error" class="form-error hidden" role="alert"></div>
        </div>
        <div class="modal-footer">
          <button id="modal-cancel">Cancel</button>
          <button id="modal-submit">Save</button>
        </div>
      </div>
    </div>

    <!-- Settings popup -->
    <div
      id="settings-modal"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="settings-title"
    >
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="settings-title">Settings</h2>
          <button id="settings-close" aria-label="Close settings">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <!-- Settings tabs -->
          <div class="settings-tabs">
            <button class="settings-tab active" data-tab="preferences">
              Preferences
            </button>
            <button class="settings-tab" data-tab="about">About</button>
            <button class="settings-tab" data-tab="help">Help!</button>
          </div>

          <!-- Preferences tab -->
          <div id="tab-preferences" class="tab-content active">
            <div class="field-group">
              <label for="settings-theme">Theme</label>
              <select id="settings-theme">
                <option value="light">‚òÄÔ∏è Light</option>
                <option value="dark">üåô Dark</option>
              </select>
            </div>

            <div class="field-group">
              <label for="settings-columns">Cards per row</label>
              <select id="settings-columns">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3" selected>3</option>
                <option value="4">4</option>
              </select>
            </div>

            <div class="field-group">
              <label for="settings-regex-flags">
                <input
                  type="checkbox"
                  id="settings-regex-flags"
                  checked
                  aria-label="Case insensitive search"
                />
                Case-insensitive search
              </label>
            </div>

            <div class="settings-actions">
              <button id="btn-export">Export JSON</button>
              <label class="file-label" for="btn-import">Import JSON</label>
              <input
                type="file"
                id="btn-import"
                accept=".json"
                class="sr-only"
                aria-label="Import JSON file"
              />
            </div>
            <div
              id="import-status"
              role="status"
              aria-live="polite"
              class="field-hint"
            ></div>
          </div>

          <!-- About tab -->
          <div id="tab-about" class="tab-content hidden">
            <div class="about-content">
              <h3>üìö Campus Life Planner</h3>
              <p>
                A powerful task management app designed specifically for
                students to organize academic work, personal goals, and campus
                activities all in one place.
              </p>

              <h4>Version</h4>
              <p>1.0.0</p>

              <h4>Contact</h4>
              <ul class="contact-list">
                <li>
                  üêô GitHub:
                  <a
                    href="https://github.com/ijazz-mal"
                    target="_blank"
                    rel="noopener"
                    >github.com/ijazz-mal</a
                  >
                </li>
                <li>
                  ‚úâÔ∏è Email:
                  <a href="mailto:student@alueducation.com"
                    >student@alueducation.com</a
                  >
                </li>
              </ul>

              <h4>Made with ‚ù§Ô∏è at ALU</h4>
              <p>African Leadership University</p>
            </div>
          </div>

          <!-- Help tab -->
          <div id="tab-help" class="tab-content hidden">
            <h3>Features</h3>
            <ul class="feature-list">
              <li>Create, edit, delete, and complete tasks</li>
              <li>Organize with categories</li>
              <li>Set priorities (Low, Medium, High)</li>
              <li>Add due dates and durations</li>
              <li>Powerful regex-based search</li>
              <li>Visual dashboard with charts</li>
              <li>Auto-save to browser</li>
              <li>Import/Export tasks as JSON</li>
              <li>Dark mode support</li>
              <li>Fully keyboard accessible</li>
            </ul>

            <h3>Keyboard Shortcuts</h3>
            <table class="keyboard-table">
              <thead>
                <tr>
                  <th>Key</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><kbd>N</kbd></td>
                  <td>Create new task</td>
                </tr>
                <tr>
                  <td><kbd>/</kbd></td>
                  <td>Focus search box</td>
                </tr>
                <tr>
                  <td><kbd>Esc</kbd></td>
                  <td>Close modal or panel</td>
                </tr>
                <tr>
                  <td><kbd>Tab</kbd></td>
                  <td>Navigate between elements</td>
                </tr>
                <tr>
                  <td><kbd>‚Üë ‚Üì</kbd></td>
                  <td>Navigate sort menu</td>
                </tr>
                <tr>
                  <td><kbd>Enter</kbd></td>
                  <td>Submit form</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="modal-footer">
          <button id="settings-cancel">Close</button>
        </div>
      </div>
    </div>

    <script src="scripts/state.js"></script>
    <script src="scripts/storage.js"></script>
    <script src="scripts/validators.js"></script>
    <script src="scripts/search.js"></script>
    <script src="scripts/ui.js"></script>
  </body>
</html>
